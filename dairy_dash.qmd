---
title: "HAU Dairy"
logo: "images/nl_agridat_hex_tp.png"
format: dashboard
#server: shiny
date-modified: 2024-03-27
orientation: columns
expandable: false
theme: flatly_edited.scss
---

```{r Dashboard set up, echo=FALSE}

source("master_script.R")
# data objects 
#fert_health_data
#prod_data
#stock_take_data
```

# Production

## Column {width="35%"}

::: {.card title="Latest Monthly Averages"}
```{r summary boxes}
layout_column_wrap(
  value_box(
    title = h1(HTML("Month")),
    value = (paste(latest_month, latest_year)),
    theme = "success",
    showcase = NULL,
    showcase_layout = "left center",
    full_screen = TRUE,
    fill = FALSE,
    height = 150L
  ),
  value_box(
    title = h1(HTML("Cows in milk <br>")),
    value = (latest_inmilk_av),
    theme = "success",
    showcase = NULL,
    showcase_layout = "left center",
    full_screen = TRUE,
    fill = FALSE,
    height = 150L
  ),
  value_box(
    title = h1(HTML("Milk production <br>")),
    value = my_comma(latest_milk_av / 100),
    p(HTML("hectolitres")),
    theme = "success",
    showcase = NULL,
    showcase_layout = "left center",
    full_screen = TRUE,
    fill = FALSE,
    height = 150L
  ),
  value_box(
    title = h1(HTML("Milk production per cow <br>")),
    value = (latest_milk_cow_av),
    p(HTML("litres")),
    theme = "success",
    showcase = NULL,
    showcase_layout = "left center",
    full_screen = TRUE,
    fill = FALSE,
    height = 150L
  ),
value_box(
    title = h1(HTML("Fat <br>")),
    value = (latest_fat_av),
    p(HTML("unit?")),
    theme = "teal"
  ),
  value_box(
    title = h1(HTML("Protien <br>")),
    value = (latest_protien_av),
    p(HTML("unit?")),
    theme = "teal"
  ),
  value_box(
    title = h1(HTML("Somatic Cell Count <br>")),
    value = (latest_scc_av),
    p(HTML("unit?")),
    theme = "teal"
  ),
  value_box(
    title = h1(HTML("BactoScan <br>")),
    value = (latest_bs_av),
    p(HTML("unit?")),
    theme = "teal"
  ),
  width = 1 / 2
)

```
:::

## Column {.tabset}

Graphs go here

# Fertility

## Column {width="20%"}

summary boxes here

## Column

Graphs go here

# Stock Take

## Column {width="20%"}

summary boxes here

## Column

Graphs go here

# Data

## Column {.tabset width="70%"}

```{r}
#| title: Production

datatable(prod_data, filter = list(position = 'topleft', clear = FALSE),
          extensions = 'Buttons',
          options = list(dom = 'Bfrtip',
                         buttons = c('copy')))

```

```{r}
#| title: Fertility and Health 

datatable(fert_health_data, filter = list(position = 'topleft', clear = FALSE),
          extensions = 'Buttons',
          options = list(dom = 'Bfrtip',
                         buttons = c('copy')))

```

```{r}
#| title: Stock take 
datatable(stock_take_data, filter = list(position = 'topleft', clear = FALSE),
          extensions = 'Buttons',
          options = list(dom = 'Bfrtip',
                         buttons = c('copy')))

```

## Column {width="30%"}

### Row {height="25%"}

::: {.card title="Download the data"}
[Download excel file]()

Need to actually add the link to download the file once the file has been created
:::

### Row {.tabset height="75%"}

::: {.card title="Information"}
ADD DATA INFORMATION HERE

**Comments**

ADD ANY DATA COMMENTS HERE
:::

# To do / queries?

::: {.card title="To do"}
#### Data file things

-   Create a data dictionary
-   Create an excel file containing all clean data sets (on different worksheets) and data dictionary
-   Or potentially create separate excel files for each?

#### General dashboard things

-   ~~Outline pages~~

-   ~~Add logo~~

-   ~~Set up master script linking to appropriate scripts for overall dashbaord set up~~

-   ~~Create github repo~~

-   ~~Create github organisation~~

-   ~~Create github page~~

-   ~~Create git hub tinyurl~~

#### Page things

-   Home page?
-   Stock take
    -   Identify key summary variables

    -   Identify key graphs

    -   Decide on layout?
-   Production
    -   ~~Identify key summary variables~~

    -   Identify key graphs

    -   Decide on layout?
-   Fertility and health
    -   Identify key summary variables

    -   Identify key graphs

    -   Decide on layout?
-   Data
    -   Add all data set tables to page

    -   Need to check the format of the date columns in the data tables
:::

::: {.card title="Queries"}
-   Do we want to separate the fertility data and the health data into separate tables?

    -   This would remove some of the suffixes at the end of the variables (e.g., \_fert)

-   Want to add an individual column for month and for year?

    -   Could be done just behind the scenes?
:::
